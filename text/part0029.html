<?xml version='1.0' encoding='utf-8'?>
<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <title>未知</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <link href="../stylesheet.css" rel="stylesheet" type="text/css"/>
<link href="../page_styles.css" rel="stylesheet" type="text/css"/>
</head>
  <body class="calibre">
<p height="0pt" width="0pt" class="calibre1">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">Computer and Communications Security (CCS</span>
</b>
</i>
 <span class="calibre12">
<tt class="calibre3">
<i class="calibre15">
<span class="calibre4">，</span>
</i>
</tt>
</span>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">04),</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">pages 298-307. ACM, 2004.</span>
</tt>
</p>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">J. P. Shen and M. Lipasti.</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">Modern Processor Design: Fundamentals of Superscalar Processors.</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">McGraw Hill, 2005.</span>
</tt>
</blockquote>
</blockquote>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">B. Shriver and B. Smith.</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">The Anatomy of a High-Performance Microprocessor: A Systems</span>
</b>
</i>
</blockquote>
</blockquote>
<p height="0pt" width="0pt" class="calibre1">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">Perspective.</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">IEEE Computer Society, 1998.</span>
</tt>
</p>
<p height="0pt" width="0pt" class="calibre1">
<span class="calibre12">
<tt class="calibre3">
<span class="calibre4">t</span>
</tt>
</span>
</p>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">A. Silberschatz, P. Galvin, and G. Gagne.</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">Operating Systems Concepts, Eighth Edition.</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">Wiley, 2008.</span>
</tt>
</blockquote>
</blockquote>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">R. Singhal. Intel next generation Nehalem microarchitecture. In</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">Intel Developer's Forum,</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">2008.</span>
</tt>
</blockquote>
</blockquote>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">R. Skeel. Roundoff error and the Patriot missile.</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">SIAM News,</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">25⑷:11, July 1992.</span>
</tt>
</blockquote>
</blockquote>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">A. Smith. Cache memories.</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">ACM Computing Surveys,</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">14(3), September 1982.</span>
</tt>
</blockquote>
</blockquote>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">E. H. Spafford. The Internet worm program: An analysis. Technical Report CSD-TR-823, Department of Computer Science, Purdue University, 1988.</span>
</tt>
</blockquote>
</blockquote>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">A. Srivastava and A. Eustace. ATOM: A system for building customized program analysis tools. In</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">Proceedings of the 1994 ACM Conference on Programming Language Design and Implementation (PLDI),</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">June 1994.</span>
</tt>
</blockquote>
</blockquote>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">W. Stallings.</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">Operating Systems: Internals and Design Principles, Sixth Edition.</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">Prentice Hall,</span>
</tt>
</blockquote>
</blockquote>
<p height="0pt" width="0pt" class="calibre1">
<tt class="calibre3">
<span class="calibre4">2008.</span>
</tt>
</p>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">W. R. Stevens.</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">TCP/IP Illustrated, Volume 1: The Protocols.</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">Addison-Wesley, 1994.</span>
</tt>
</blockquote>
</blockquote>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">W. R. Stevens.</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">TCP/IP Illustrated, Volume 2: The Implementation.</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">Addison-Wesley, 1995.</span>
</tt>
</blockquote>
</blockquote>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">W. R. Stevens.</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">TCP/IP Illustrated, Volume 3: TCP for Transactions, HTTP, NNTP and the Unix domain protocols.</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">Addison-Wesley, 1996.</span>
</tt>
</blockquote>
</blockquote>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">W. R. Stevens.</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">Unix Network Programming: Interprocess Communications, Second Edition,</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">volume 2. Prentice Hall, 1998.</span>
</tt>
</blockquote>
</blockquote>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">W. R. Stevens, B. Fenner, and A. M. Rudoff.</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">Unix Network Programming: The Sockets Networking API，Third Edition,</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">volume 1. Prentice Hall, 2003.</span>
</tt>
</blockquote>
</blockquote>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">W. R. Stevens and S. A. Rago.</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">Advanced Programming in the Unix Environment, Second Edition.</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">Addison-Wesley, 2008.</span>
</tt>
</blockquote>
</blockquote>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">T. Strieker and T. Gross. Global address space, non-uniform bandwidth: A memory system performance characterization of parallel systems. In</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">Proceedings of the Third International Symposium on High Performance Computer Architecture (HPCA),</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">pages 168-179, San Antonio, TX, February 1997. IEEE.</span>
</tt>
</blockquote>
</blockquote>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">A. Tanenbaum.</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">Modern Operating Systems, Third Edition.</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">Prentice Hall, 2007.</span>
</tt>
</blockquote>
</blockquote>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">A. Tanenbaum.</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">Computer Networks, Fourth Edition.</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">Prentice Hall, 2002.</span>
</tt>
</blockquote>
</blockquote>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">K. P. Wadleigh and I. L. Crawford.</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">Software Optimization for High-Performance Computing: Creating Faster Applications.</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">Prentice Hall,</span>
</tt>
 <span class="calibre12">
<b class="calibre13">
<span class="calibre4">2000</span>
</b>
</span>
 <span class="calibre2">
<b class="calibre13">
<span class="calibre4">.</span>
</b>
</span>
</blockquote>
</blockquote>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">J. F. Wakerly.</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">Digital Design Principles and Practices, Fourth Edition.</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">Prentice Hall, 2005.</span>
</tt>
</blockquote>
</blockquote>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">M. V. Wilkes. Slave memories and dynamic storage allocation.</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">IEEE Transactions on Electronic Computers,</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">EC-14(2), April 1965.</span>
</tt>
</blockquote>
</blockquote>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">P. Wilson, M. Johnstone, M. Neely, and D. Boles. Dynamic storage allocation: A survey and critical review. In</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">International Workshop on Memory Management</span>
</b>
</i>
 <span class="calibre12">
<tt class="calibre3">
<i class="calibre15">
<span class="calibre4">，</span>
</i>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">Kinross, Scotland, 1995.</span>
</tt>
</blockquote>
</blockquote>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">M. Wolf and M. Lam. A data locality algorithm. In</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">Conference on Programming Language Design and Implementation (SIGPLAN),</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">pages 30-44, June 1991.</span>
</tt>
</blockquote>
</blockquote>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">J. Wylie, M. Bigrigg, J. Strunk, G. Ganger,</span>
</tt>
</blockquote>
</blockquote>
<p height="0pt" width="0pt" class="calibre1">
<tt class="calibre3">
<span class="calibre4">Kiliccote, and P. Khosla. Survivable information storage systems.</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">IEEE Computer,</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">August</span>
</tt>
 <span class="calibre12">
<b class="calibre13">
<span class="calibre4">2000</span>
</b>
</span>
 <span class="calibre2">
<b class="calibre13">
<span class="calibre4">.</span>
</b>
</span>
</p>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">T.-Y. Yeh and Y. N. Patt. Alternative implementation of two-level adaptive branch prediction. In</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">International Symposium on Computer Architecture,</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">pages 451-461,1998.</span>
</tt>
</blockquote>
</blockquote>
<blockquote height="0pt" class="calibre26">
<blockquote width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">X. Zhang, Z. Wang, N. Gloy, J. B. Chen, and M. D. Smith. System support for automatic profiling and optimization. In</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">Proceedings of the Sixteenth ACM Symposium on Operating Systems Principles (SOSP),</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">pages 15-26, October 1997.</span>
</tt>
</blockquote>
</blockquote>
<p height="0pt" width="0pt" class="calibre1">
<span class="calibre2">
<tt class="calibre3">
<span class="calibre4">2<sup class="calibre31">
<small class="calibre8">
<span class="calibre30">
<tt class="calibre3">
<span class="calibre4">3</span>
</tt>
</span>
</small>
</sup>
 + 2<sup class="calibre31">
<small class="calibre8">
<span class="calibre30">
<tt class="calibre3">
<span class="calibre4">2</span>
</tt>
</span>
</small>
</sup>
 + 2<sup class="calibre31">
<small class="calibre8">
<span class="calibre30">
<tt class="calibre3">
<span class="calibre4">X</span>
</tt>
</span>
</small>
</sup>
 = 14</span>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">0</span>
</tt>
</p>
<p height="0pt" width="0pt" class="calibre1">
<tt class="calibre3">
<span class="calibre4">2<sup class="calibre7">
<small class="calibre8">
<tt class="calibre3">
<span class="calibre4">2</span>
</tt>
</small>
</sup>
 + 2° = 5</span>
</tt>
 <b class="calibre13">
<span class="calibre4">2<sup class="calibre7">
<small class="calibre8">
<b class="calibre13">
<span class="calibre4">3</span>
</b>
</small>
</sup>
</span>
</b>
 <span class="calibre2">
<tt class="calibre3">
<span class="calibre4">=</span>
</tt>
</span>
 <b class="calibre13">
<span class="calibre4">8</span>
</b>
 <tt class="calibre3">
<span class="calibre4">2<sup class="calibre7">
<small class="calibre8">
<tt class="calibre3">
<span class="calibre4">3</span>
</tt>
</small>
</sup>
 + 2<sup class="calibre7">
<small class="calibre8">
<tt class="calibre3">
<span class="calibre4">2</span>
</tt>
</small>
</sup>
 + 2<sup class="calibre7">
<small class="calibre8">
<tt class="calibre3">
<span class="calibre4">0</span>
</tt>
</small>
</sup>
 = 13 . 23 + 22 + 2.420 = 15</span>
</tt>
</p>
<p height="0pt" width="0pt" class="calibre1">
<span class="calibre12">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">-</span>
</b>
</i>
</tt>
</span>
 <span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">code/mem/matmult/mm. c</span>
</b>
</i>
</span>
</p>
<p height="0pt" width="0pt" class="calibre1">
<span class="calibre2">
<b class="calibre13">
<span class="calibre4">a</span>
</b>
</span>
 <span class="calibre2">
<tt class="calibre3">
<span class="calibre4">)狄版本</span>
</tt>
</span>
</p>
<p height="0pt" width="3em" class="calibre1">
<span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">code/mem/matmult/mm.</span>
</b>
</i>
</span>
 <span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</i>
</span>
 <span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">c</span>
</b>
</i>
</span>
</p>
<p height="0pt" width="0pt" class="calibre1">
<span class="calibre12">
<tt class="calibre3">
<span class="calibre4">1</span>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">      </span>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">for (j</span>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">      </span>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">= 0; j</span>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">      </span>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">&lt;</span>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">      </span>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">n; j++)</span>
</tt>
</span>
</p>
<p height="0pt" width="0pt" class="calibre1">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">：)</span>
</b>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">r = B[k] [j];</span>
</b>
</tt>
</span>
</p>
<p height="0pt" width="0pt" class="calibre1">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">4</span>
</b>
</i>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">      </span>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">for (i = 0; i &lt; n; i++)</span>
</tt>
</span>
</p>
<p height="0pt" width="0pt" class="calibre1">
<span class="calibre12">
<tt class="calibre3">
<span class="calibre4">5</span>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">      </span>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">C[i] [j] += A[i] [k]*r;</span>
</tt>
</span>
</p>
<p height="0pt" width="0pt" class="calibre1">
<tt class="calibre3">
<span class="calibre4">6</span>
</tt>
 <tt class="calibre3">
<span class="calibre4">      </span>
</tt>
 <tt class="calibre3">
<span class="calibre4">&gt;</span>
</tt>
</p>
<p height="0pt" width="3em" class="calibre1">
<span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">code/mem/matmult/mm.</span>
</b>
</i>
</span>
 <span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</i>
</span>
 <span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">c</span>
</b>
</i>
</span>
</p>
<p height="0pt" width="0pt" class="calibre1">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">c)如版本</span>
</b>
</tt>
</span>
</p>
<p height="0pt" width="3em" class="calibre1">
<span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">code/mem/matmult/mm. c</span>
</b>
</i>
</span>
</p>
<p height="0pt" width="0pt" class="calibre1">
<span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">code/ecf/snooze. c</span>
</b>
</i>
</span>
</p>
<p height="0pt" width="-18pt" class="calibre1">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">**9.14</span>
</b>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">假设有一个输入文件hello, txt,由字符串“Hello, world!\n”组成，编写一个C程序，使 用 mmap 将 hello• txt 的内容改变为 “Jello, world!\n，，。</span>
</tt>
</p>
<p height="0pt" width="-18pt" class="calibre1">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">*9.15</span>
</b>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">确定下面的</span>
</tt>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">malloc</span>
</b>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">请求序列得到的块大小和头部值。假设：</span>
</tt>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">1)</span>
</b>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">分配器维持双字对齐，使用隐式空 闲链表，以及图</span>
</tt>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">9-35</span>
</b>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">中的块格式。</span>
</tt>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">2)</span>
</b>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">块大小向上舍入为最接近的</span>
</tt>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">8</span>
</b>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">字节的倍数。</span>
</tt>
</p>
<p height="0pt" width="0pt" class="calibre1">
<span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">code/src/csapp.c</span>
</b>
</i>
</span>
</p>
<p height="0pt" width="0pt" class="calibre1">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">图A-4 Posix风格的pthread_detach函数的包装函数</span>
</b>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">’ DNS风格的错误处理包装函数。图A-5展示了 DNS风格的gethostbyname函数的包装函数。</span>
</tt>
</p>
<p height="0pt" width="0pt" class="calibre1">
<span class="calibre12">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">；</span>
</b>
</i>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">                  </span>
</b>
</i>
</tt>
</span>
 <span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">code/src/csapp.c</span>
</b>
</i>
</span>
</p>
<p height="0pt" width="0pt" class="calibre1">
<span class="calibre2">
<b class="calibre13">
<span class="calibre4">2</span>
</b>
</span>
 <span class="calibre2">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</span>
 <span class="calibre2">
<b class="calibre13">
<span class="calibre4">. {</span>
</b>
</span>
</p>
<p height="0pt" width="0pt" class="calibre1">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">3</span>
</b>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">struct hostent</span>
</b>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">*p;</span>
</b>
</tt>
</span>
</p>
<p height="0pt" width="0pt" class="calibre1">
<tt class="calibre3">
<i class="calibre15">
<span class="calibre4">A</span>
</i>
</tt>
</p>
<p height="0pt" width="0pt" class="calibre1">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">5</span>
</b>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">if ((p = gethostbyname(name)) == NULL)</span>
</b>
</tt>
</span>
</p>
<p height="0pt" width="0pt" class="calibre1">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">6</span>
</b>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">dns_error C"Gethostbyname error");</span>
</b>
</tt>
</span>
</p>
<p height="0pt" width="0pt" class="calibre1">
<span class="calibre12">
<tt class="calibre3">
<span class="calibre4">7</span>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">      </span>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">return p;</span>
</tt>
</span>
</p>
<p height="0pt" width="0pt" class="calibre1">
<tt class="calibre3">
<span class="calibre4">B 1</span>
</tt>
</p>
<p height="0pt" width="3em" class="calibre1">
<sup class="calibre7">
<small class="calibre8">
<span class="calibre18">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">:</span>
</b>
</i>
</tt>
</span>
</small>
</sup>
 <span class="calibre12">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">      <sup class="calibre23">
<small class="calibre8">
<span class="calibre18">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">:</span>
</b>
</i>
</tt>
</span>
</small>
</sup>
                   </span>
</b>
</i>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">：</span>
</b>
</i>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</i>
</tt>
</span>
 <span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">code/src/csapp. c</span>
</b>
</i>
</span>
</p>
<p height="0pt" width="0pt" class="calibre1">
<tt class="calibre3">
<span class="calibre4">图A-5 DNS风格的gethostbyname函数的包装函数</span>
</tt>
</p>
<p height="0pt" width="0pt" class="calibre1">
<tt class="calibre3">
<span class="calibre4">[79]</span>
</tt>
 <tt class="calibre3">
<span class="calibre4">      </span>
</tt>
 <tt class="calibre3">
<span class="calibre4">D. Patterson, G. Gibson, and R. Katz. A case for</span>
</tt>
 <tt class="calibre3">
<span class="calibre4">      </span>
</tt>
 <tt class="calibre3">
<span class="calibre4">r^l</span>
</tt>
</p>
<p height="0pt" width="0pt" class="calibre1">
<tt class="calibre3">
<span class="calibre4">redundant arrays of inexpensive disks (RAID).</span>
</tt>
</p>
<p height="0pt" width="0pt" class="calibre1">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">In Proceedings of the 1998 ACM SIGMOD Conference.</span>
</b>
</i>
 <tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">ACM, June 1988.</span>
</b>
</i>
</tt>
</p>
<p height="0pt" width="0pt" class="calibre1">
<tt class="calibre3">
<span class="calibre4">[80]</span>
</tt>
 <tt class="calibre3">
<span class="calibre4">      </span>
</tt>
 <tt class="calibre3">
<span class="calibre4">L. Peterson and B. Davie.</span>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">Computer Networks:</span>
</b>
</i>
 <tt class="calibre3">
<span class="calibre4">      </span>
</tt>
 <tt class="calibre3">
<span class="calibre4">[</span>
</tt>
 <span class="calibre2">
<tt class="calibre3">
<span class="calibre4">93</span>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">]</span>
</tt>
</p>
<p height="0pt" width="0pt" class="calibre1">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">A Systems Approach, Fourth Edition.</span>
</b>
</i>
 <tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">Morgan Kaufmann, 2007.</span>
</b>
</i>
</tt>
</p>
<p height="0pt" width="0pt" class="calibre1">
<tt class="calibre3">
<span class="calibre4">[81]</span>
</tt>
 <tt class="calibre3">
<span class="calibre4">      </span>
</tt>
 <tt class="calibre3">
<span class="calibre4">J. Pincus and B. Baker. Beyond stack smashing:</span>
</tt>
 <tt class="calibre3">
<span class="calibre4">      </span>
</tt>
 <tt class="calibre3">
<span class="calibre4">[</span>
</tt>
 <span class="calibre2">
<tt class="calibre3">
<span class="calibre4">94</span>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">]</span>
</tt>
</p>
<p height="0pt" width="0pt" class="calibre1">
<tt class="calibre3">
<span class="calibre4">Recent advances in exploiting buffer overruns.</span>
</tt>
</p>
<p height="0pt" width="0pt" class="calibre1">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">IEEE Security and Privacy,</span>
</b>
</i>
 <tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">2⑷:20~27，2004.</span>
</b>
</i>
</tt>
 <tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</i>
</tt>
 <tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">[</span>
</b>
</i>
</tt>
 <span class="calibre2">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">95</span>
</b>
</i>
</tt>
</span>
 <tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">]</span>
</b>
</i>
</tt>
</p>
<p height="0pt" width="0pt" class="calibre1">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">[82]</span>
</b>
</i>
</tt>
 <tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</i>
</tt>
 <tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">S. Przybylski.</span>
</b>
</i>
</tt>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">Cache and Memory Hierarchy</span>
</b>
</i>
</p>
<p height="0pt" width="0pt" class="calibre1">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">Design: A Performance-Directed Approach.</span>
</b>
</i>
</p>
<p height="0pt" width="0pt" class="calibre1">
<tt class="calibre3">
<span class="calibre4">Morgan Kaufmann, 1990.</span>
</tt>
</p>
<p height="0pt" width="0pt" class="calibre39">
<span class="calibre11">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">描述</span>
</b>
</tt>
</span>
</p>
<span id="filepos0006932657"></span>
<p height="10pt" width="0pt" class="calibre39">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">[</span>
</tt>
</span>
 <a href="part0002_split_001.html#filepos0000647011">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">←1</span>
</tt>
</span>
</a>
 <span class="calibre11">
<tt class="calibre3">
<span class="calibre4">]</span>
</tt>
</span>
</p>
<blockquote height="0pt" width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">      </span>
</tt>
 <tt class="calibre3">
<span class="calibre4">I I -I</span>
</tt>
</blockquote>
<span id="filepos0006933075"></span>
<p height="0pt" width="0pt" class="calibre39">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">[</span>
</tt>
</span>
 <a href="part0019_split_000.html#filepos0004569002">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">←2</span>
</tt>
</span>
</a>
 <span class="calibre11">
<tt class="calibre3">
<span class="calibre4">]</span>
</tt>
</span>
</p>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<span class="calibre4">      </span>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">for</span>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">(k</span>
</b>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">=</span>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">0;</span>
</b>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">k &lt; n;</span>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">k++)</span>
</b>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">{</span>
</tt>
</span>
</blockquote>
<span id="filepos0006933996"></span>
<p height="0pt" width="0pt" class="calibre39">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">[</span>
</tt>
</span>
 <a href="part0020_split_001.html#filepos0004922984">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">←3</span>
</tt>
</span>
</a>
 <span class="calibre11">
<tt class="calibre3">
<span class="calibre4">]</span>
</tt>
</span>
</p>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</i>
</tt>
</span>
 <span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">code/link/p-exe. d</span>
</b>
</i>
</span>
</blockquote>
<span id="filepos0006934488"></span>
<p height="0pt" width="0pt" class="calibre39">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">[</span>
</tt>
</span>
 <a href="part0020_split_001.html#filepos0004960497">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">←4</span>
</tt>
</span>
</a>
 <span class="calibre11">
<tt class="calibre3">
<span class="calibre4">]</span>
</tt>
</span>
</p>
<blockquote height="0pt" width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">图7-12示例可执行文件p的段头部表</span>
</tt>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<span class="calibre4">off</span>
</tt>
</span>
 <span class="calibre2">
<tt class="calibre3">
<span class="calibre4">：文件偏移；</span>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">vaddr/paddr</span>
</tt>
</span>
 <span class="calibre2">
<tt class="calibre3">
<span class="calibre4">：虚拟</span>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">/</span>
</tt>
</span>
 <span class="calibre2">
<tt class="calibre3">
<span class="calibre4">物理地址</span>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">；align</span>
</tt>
</span>
 <span class="calibre2">
<tt class="calibre3">
<span class="calibre4">：段对齐</span>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">；filesz</span>
</tt>
</span>
 <span class="calibre2">
<tt class="calibre3">
<span class="calibre4">：</span>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">memsz</span>
</tt>
</span>
 <span class="calibre2">
<tt class="calibre3">
<span class="calibre4">：存储器中的段大小</span>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">；flags</span>
</tt>
</span>
 <span class="calibre2">
<tt class="calibre3">
<span class="calibre4">：运行时许可<sub class="calibre29">
<small class="calibre8">
<span class="calibre18">
<tt class="calibre3">
<span class="calibre4">0</span>
</tt>
</span>
</small>
</sub>
</span>
</tt>
</span>
</blockquote>
<span id="filepos0006935992"></span>
<p height="0pt" width="0pt" class="calibre39">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">[</span>
</tt>
</span>
 <a href="part0022_split_000.html#filepos0005286309">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">←5</span>
</tt>
</span>
</a>
 <span class="calibre11">
<tt class="calibre3">
<span class="calibre4">]</span>
</tt>
</span>
</p>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</i>
</tt>
</span>
 <span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">code/ecf/waitpid2.c</span>
</b>
</i>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">图8-18使用waitpid按照创建子进程的顺序来回收这些僵死子进程</span>
</b>
</tt>
</span>
</blockquote>
<span id="filepos0006936692"></span>
<p height="0pt" width="0pt" class="calibre39">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">[</span>
</tt>
</span>
 <a href="part0023_split_000.html#filepos0005476759">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">←6</span>
</tt>
</span>
</a>
 <span class="calibre11">
<tt class="calibre3">
<span class="calibre4">]</span>
</tt>
</span>
</p>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</i>
</tt>
</span>
 <span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">code/ecf/signal4. c</span>
</b>
</i>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">图8-35 signal4 ：图8-32的一个版本，该版本通过使用Signal包装函数得到可移植的信号处理语义</span>
</tt>
</blockquote>
<blockquote height="0pt" width="2em" class="calibre22">
<tt class="calibre3">
<span class="calibre4">并发编程是一个很深奥且很重要的问题，我们将在第12章中更详细地讨论。不过，在本章 中学习到的有关异常控制流的知识，可以让你感觉一下与并发相关的有趣的智力挑战9例如，考 虑图8-36中的程序，它总结了一个典型的Unix外壳的结构。父进程在一个作业列表中记录着它 的当前子进程，每个作业一个条目</span>
</tt>
 <span class="calibre2">
<tt class="calibre3">
<span class="calibre4">。</span>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">add job和delete job函数分别向这个作业列表添加和从 中删除作业。</span>
</tt>
</blockquote>
<blockquote height="0pt" width="2em" class="calibre22">
<tt class="calibre3">
<span class="calibre4">当父进程创建一个新的子进程时，它就把这个子进程添加到作业列表中。当父进程在 SIGCHLD处理程序中回收一个终止的（僵死）子进程时，它就从作业列表中删除这个子进程。 乍一看，这段代码看上去是对的。不幸的是，可能发生下面的情况：</span>
</tt>
</blockquote>
<blockquote height="0pt" width="3em" class="calibre22">
<span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">code/ecf/procmaskl.c</span>
</b>
</i>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">图8-36 —个具有细微同步错误的外壳程序。如果子进程在父进程能够开始运行前就结束了，那么 add j ob和delete job会以错误的方式被调用</span>
</tt>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre4">2 </span>
 <tt class="calibre3">
<span class="calibre4">父进程执行fork函数，内核调度新创建的子进程运行，而不是父进程。</span>
</tt>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre4">3 </span>
 <tt class="calibre3">
<span class="calibre4">在父进程能够再次运行之前，子进程就终止，并且变成一个僵死进程，使得内核传递一 个SIGCHLD信号给父进程。</span>
</tt>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre4">4 </span>
 <tt class="calibre3">
<span class="calibre4">后来，当父进程再次变成可运行但又在它执行之前，内核注意到待处理的SIGCHLD信 号，并通过在父进程中运行处理程序接收这个信号。</span>
</tt>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre4">5 </span>
 <tt class="calibre3">
<span class="calibre4">处理程序回收终止的子进程，并调用deletejob，这个函数什么也不做，因为父进程 还没有把该子进程添加到列表中。</span>
</tt>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre4">6 </span>
 <tt class="calibre3">
<span class="calibre4">在处理程序运行完毕后，内核运行父进程，父进程从fork返回，通过调用addjob错 误地把（不存在的）子进程添加到作业列表中。</span>
</tt>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">因此，对于父进程的main函数流和信号处理流的某些交错，可能会在addjob之前调用deletejob。这 导致作业列表中出现一个不正确的条目，对应于一个不再存在而且永远也不会被删除的作业。另一方面, 也有一些交错，事件按照正确的顺序发生。例如，如果在fork调用返回时，内核刚好调度父进程而不是 子进程运行，那么父进程就会正确地把子进程添加到作业列表中，然后子进程终止，信号处理函数把该作 业从列表中删除。</span>
</tt>
</blockquote>
<blockquote height="0pt" width="2em" class="calibre22">
<tt class="calibre3">
<span class="calibre4">这是一个称</span>
</tt>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">为竞争</span>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">（race)的经典同步错误的示例。在这种情况下，main函数中调用addjob 和处理程序中调用deletejob之间存在竞争。如果addjob赢得进展，那么结果就是正确的。 如果它没有，那么结果就是错误的。这样的错误非常难以调试，因为几乎不可能测试所有的交 错。你可能运行这段代码十亿次，也没有一次错误，但是下一次测试却导致引发竞争的交错。</span>
</tt>
</blockquote>
<span id="filepos0006941606"></span>
<p height="0pt" width="0pt" class="calibre39">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">[</span>
</tt>
</span>
 <a href="part0023_split_001.html#2SLD-96d925d398a443b8b8af221b0d2c48c5">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">←7</span>
</tt>
</span>
</a>
 <span class="calibre11">
<tt class="calibre3">
<span class="calibre4">]</span>
</tt>
</span>
</p>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">#include "csapp.h"</span>
</b>
</tt>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre2">
<b class="calibre13">
<span class="calibre4">2</span>
</b>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">h</span>
</b>
</i>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">SIGINT handler</span>
</tt>
</span>
 <span class="calibre2">
<tt class="calibre3">
<span class="calibre4">氺</span>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">/</span>
</tt>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">A</span>
</b>
</i>
</span>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">void handler(int sig)</span>
</b>
</tt>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<span class="calibre4">{</span>
</tt>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">return;</span>
</b>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">/* Catch the signal and return */</span>
</tt>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<span class="calibre4">&gt;</span>
</tt>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre2">
<tt class="calibre3">
<span class="calibre4">8</span>
</tt>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">unsigned int snooze(unsigned int secs) {</span>
</b>
</tt>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">unsigned int rc = sleep(secs);</span>
</b>
</tt>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">n</span>
</b>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">printf ("Slept for %u of %u secsAn", secs</span>
</b>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">- rc, secs);</span>
</b>
</tt>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">return rc;</span>
</b>
</tt>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">int main(int argc, char **argv) {</span>
</b>
</tt>
</span>
</blockquote>
<span id="filepos0006944414"></span>
<p height="0pt" width="0pt" class="calibre39">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">[</span>
</tt>
</span>
 <a href="part0024_split_001.html#filepos0005931840">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">←8</span>
</tt>
</span>
</a>
 <span class="calibre11">
<tt class="calibre3">
<span class="calibre4">]</span>
</tt>
</span>
</p>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</i>
</tt>
</span>
 <span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">code/vm/malloc/mm. c</span>
</b>
</i>
</span>
</blockquote>
<blockquote height="0pt" width="2em" class="calibre22">
<tt class="calibre3">
<span class="calibre4">图9-46 mm</span>
</tt>
 <span class="calibre2">
<tt class="calibre3">
<span class="calibre4">一</span>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">free :释放一个块，并使用边界标记合并将其与所有的邻接空闲块在常数时间内合并</span>
</tt>
</blockquote>
<blockquote height="0pt" width="2em" class="calibre22">
<tt class="calibre3">
<span class="calibre4">coalesce函数中的代码是图9-40中勾画的四种情况的一种简单直接的实现。这里也有一 个微妙的方面。我们选择的空闲链表格式（它的序言块和结尾块总是标记为已分配）允许我们忽 略潜在的麻烦的边界情况，也就是，请求块bp在堆的起始处或者是在堆的结尾处。如果没有这 些特殊块，代码将混乱得多，更加容易出错，并且更慢，因为我们将不得不在每次释放请求时都 去检査这些并不常见的边界情况。</span>
</tt>
</blockquote>
<blockquote height="0pt" width="2em" class="calibre22">
<span class="calibre4">5</span>
 <tt class="calibre3">
<span class="calibre4">•分配块</span>
</tt>
</blockquote>
<blockquote height="0pt" width="2em" class="calibre22">
<tt class="calibre3">
<span class="calibre4">一个应用通过调用mm_mall<sub class="calibre17">
<small class="calibre8">
<tt class="calibre3">
<span class="calibre4">OC</span>
</tt>
</small>
</sub>
 函数（见图9-47)来向存储器请求大小为size字节的块。 在检查完请求的真假之后，分配器必须调整请求块的大小，从而为头部和脚部留有空间，并满足</span>
</tt>
</blockquote>
<span id="filepos0006946373"></span>
<p height="0pt" width="0pt" class="calibre39">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">[</span>
</tt>
</span>
 <a href="part0025_split_000.html#filepos0006060257">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">←9</span>
</tt>
</span>
</a>
 <span class="calibre11">
<tt class="calibre3">
<span class="calibre4">]</span>
</tt>
</span>
</p>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</i>
</tt>
</span>
 <span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">code/vm/mmapcopy. c</span>
</b>
</i>
</span>
</blockquote>
<span id="filepos0006946866"></span>
<p height="0pt" width="0pt" class="calibre39">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">[</span>
</tt>
</span>
 <a href="part0025_split_000.html#filepos0006061862">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">←10</span>
</tt>
</span>
</a>
 <span class="calibre11">
<tt class="calibre3">
<span class="calibre4">]</span>
</tt>
</span>
</p>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<span class="calibre4">练习题</span>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">9.6这道题触及了一些核心的概念，例如对齐要求、最小块大小以及头部编码。确定块大小的一般 方法是，将所请求的有效载荷和头部大小的和舍入到对齐要求</span>
</tt>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">（在此</span>
</b>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">例中是8字节）最近的整数倍。比如，</span>
</tt>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">malloc(l)</span>
</b>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">请求的块大小是4+1 =5,然后舍入到8。而</span>
</tt>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">malloc (13&gt;</span>
</b>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">请求的块大小是13 + 4 = 17,舍 入到24。</span>
</tt>
</blockquote>
<blockquote height="0pt" width="3em" class="calibre22">
<span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">code/vm/malloc/mm. c</span>
</b>
</i>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<span class="calibre4">练习题</span>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">9.9</span>
</tt>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">这又是一个帮助你熟悉分配器的热身练习。注意对于这个分配器，最小块大小是</span>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">16</span>
</tt>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">字节。如 果分割后剩下的块大于或者等于最小块大小，那么我们就分割这个块（第</span>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">6</span>
</tt>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">〜</span>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">10</span>
</tt>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">行）。这里唯一有技巧的 部分是要意识到在移动到下一块之前（第</span>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">8</span>
</tt>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">行），你必须放置新的巳分配块（第</span>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">6</span>
</tt>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">行和第</span>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">7</span>
</tt>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">行）。</span>
</tt>
</span>
</blockquote>
<blockquote height="0pt" width="3em" class="calibre22">
<span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">code/vm/malloc/mm. c</span>
</b>
</i>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">static void place(void *bp, size_t asize)</span>
</b>
</tt>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">{</span>
</tt>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">3</span>
</tt>
 <tt class="calibre3">
<span class="calibre4">      </span>
</tt>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">size_t</span>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">csize = GET_SIZE(HDRP(bp));</span>
</tt>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<span class="calibre4">if ((csize - asize) &gt;= (2+DSIZE)) {</span>
</tt>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">PUT(HDRP(bp), PACK(asize, 1));</span>
</b>
</tt>
</span>
</blockquote>
<span id="filepos0006950281"></span>
<p height="0pt" width="0pt" class="calibre39">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">[</span>
</tt>
</span>
 <a href="part0026_split_000.html#filepos0006269318">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">←11</span>
</tt>
</span>
</a>
 <span class="calibre11">
<tt class="calibre3">
<span class="calibre4">]</span>
</tt>
</span>
</p>
<blockquote height="0pt" width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">图11-11 DNS主机条目结构</span>
</tt>
</blockquote>
<blockquote height="0pt" width="2em" class="calibre22">
<tt class="calibre3">
<span class="calibre4">因特网应用程序通过调用gethostbyname和gethostbyaddr函数，从DNS数据库中 检索任意的主机条目。</span>
</tt>
</blockquote>
<span id="filepos0006950894"></span>
<p height="0pt" width="0pt" class="calibre39">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">[</span>
</tt>
</span>
 <a href="part0026_split_000.html#filepos0006270245">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">←12</span>
</tt>
</span>
</a>
 <span class="calibre11">
<tt class="calibre3">
<span class="calibre4">]</span>
</tt>
</span>
</p>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</i>
</tt>
</span>
 <span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">netdb.h</span>
</b>
</i>
</span>
</blockquote>
<span id="filepos0006951376"></span>
<p height="0pt" width="0pt" class="calibre39">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">[</span>
</tt>
</span>
 <a href="part0026_split_000.html#filepos0006271390">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">←13</span>
</tt>
</span>
</a>
 <span class="calibre11">
<tt class="calibre3">
<span class="calibre4">]</span>
</tt>
</span>
</p>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</i>
</tt>
</span>
 <span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">code/netp/hostinfo.c</span>
</b>
</i>
</span>
</blockquote>
<span id="filepos0006951871"></span>
<p height="0pt" width="0pt" class="calibre39">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">[</span>
</tt>
</span>
 <a href="part0026_split_000.html#filepos0006273452">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">←14</span>
</tt>
</span>
</a>
 <span class="calibre11">
<tt class="calibre3">
<span class="calibre4">]</span>
</tt>
</span>
</p>
<blockquote height="0pt" width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">图11-12检索并打印一个DNS主机条目</span>
</tt>
</blockquote>
<blockquote height="0pt" width="2em" class="calibre22">
<tt class="calibre3">
<span class="calibre4">我们可以借助图11-12中的hostinfo程序来挖掘一些DNS映射的特性，这个程序从命令 行读取一个域名或点分十进制地址，并显示相应的主机条目。每台因特网主机都有本地定义的域 名localhost,这个域名总是映射为</span>
</tt>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">本地回送地址</span>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">（loopbackaddress) 127.0.0.1:</span>
</tt>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<b class="calibre13">
<span class="calibre4">unix&gt;</span>
</b>
</span>
 <span class="calibre12">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">./hostinfo localhost</span>
</b>
</i>
</tt>
</span>
 <span class="calibre12">
<b class="calibre13">
<span class="calibre4">official hostname: localhost alias: localhost.localdomain address: 127.0.0.1</span>
</b>
</span>
</blockquote>
<span id="filepos0006953139"></span>
<p height="0pt" width="0pt" class="calibre39">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">[</span>
</tt>
</span>
 <a href="part0026_split_001.html#filepos0006422672">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">←15</span>
</tt>
</span>
</a>
 <span class="calibre11">
<tt class="calibre3">
<span class="calibre4">]</span>
</tt>
</span>
</p>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</i>
</tt>
</span>
 <span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">code/netp/tiny/tiny. c</span>
</b>
</i>
</span>
</blockquote>
<span id="filepos0006953636"></span>
<p height="0pt" width="0pt" class="calibre39">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">[</span>
</tt>
</span>
 <a href="part0027_split_000.html#filepos0006498226">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">←16</span>
</tt>
</span>
</a>
 <span class="calibre11">
<tt class="calibre3">
<span class="calibre4">]</span>
</tt>
</span>
</p>
<blockquote height="0pt" width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">图12-5基于进程的并发echo服务器。父进程派生一个子进程来处理每个新的连接请求</span>
</tt>
</blockquote>
<span id="filepos0006954108"></span>
<p height="0pt" width="0pt" class="calibre39">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">[</span>
</tt>
</span>
 <a href="part0027_split_000.html#filepos0006499424">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">←17</span>
</tt>
</span>
</a>
 <span class="calibre11">
<tt class="calibre3">
<span class="calibre4">]</span>
</tt>
</span>
</p>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</i>
</span>
 <span class="calibre12">
<i class="calibre15">
<span class="calibre4">code/conc/echoserverp. c</span>
</i>
</span>
</blockquote>
<span id="filepos0006954591"></span>
<p height="0pt" width="0pt" class="calibre39">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">[</span>
</tt>
</span>
 <a href="part0028_split_001.html#filepos0006808735">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">←18</span>
</tt>
</span>
</a>
 <span class="calibre11">
<tt class="calibre3">
<span class="calibre4">]</span>
</tt>
</span>
</p>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</i>
</tt>
</span>
 <span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">code/conc/hellobug. c</span>
</b>
</i>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">图12-44家庭作业题12.17的有bug的程序</span>
</b>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">用图</span>
</tt>
 <span class="calibre2">
<tt class="calibre3">
<span class="calibre4">12</span>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">-</span>
</tt>
 <span class="calibre2">
<tt class="calibre3">
<span class="calibre4">21</span>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">中的进度图，将下面的轨迹线分类为安全或者不安全的。</span>
</tt>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">丑2，L2,</span>
</b>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">^2» 好1’ 乙1，知，"1，*^1，『1，^2</span>
</b>
</tt>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">Hi, Hi, Li, Ui, Si,</span>
</b>
</i>
</span>
 <span class="calibre12">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">[2，7\，/72，^2»</span>
</b>
</i>
</tt>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">Hi, L\, Hii L</span>
</b>
</i>
 <span class="calibre12">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">2</span>
</b>
</i>
</tt>
</span>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">, U</span>
</b>
</i>
 <span class="calibre12">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">2</span>
</b>
</i>
</tt>
</span>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">, S</span>
</b>
</i>
 <span class="calibre12">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">2</span>
</b>
</i>
</tt>
</span>
 <i class="calibre15">
<b class="calibre13">
<span class="calibre4">, U\j T</span>
</b>
</i>
 <span class="calibre12">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">2</span>
</b>
</i>
</tt>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">图</span>
</tt>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">12-26</span>
</b>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">中第一类读者一写者问题的解答给予读者的是有些弱的优先级，因为读者在离开它的临界 区时，可能会重启一个正在等待的写者，而不是一个正在等待的读者。推导出一个解答，它给予读 者更强的优先级，当写者离开它的临界区的时候，如果有读者正在等待的话，就总是重启一个正在 等待的读者。</span>
</tt>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">考虑读.者-写者问题的一个更简单的变种，即最多只有I个读者。推导:出一个解答，给予读者和 写者同等的优先级，.即等待中的读者和写者被赋予对资源访问的同等的机会。提示：你可以用一个 计数信号量和一个互斥锁来解决这个问题。</span>
</tt>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">推导出第二类读者一写者问题的一个解答，在此写者的优先级高于读者。</span>
</tt>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">检查一下你对select函数的理解，请修改图</span>
</tt>
 <span class="calibre2">
<tt class="calibre3">
<span class="calibre4">12-6</span>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">中的服务器，使得它在主服务器的每次迭代中 最多只回送一个文本行。</span>
</tt>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">图</span>
</tt>
 <span class="calibre2">
<tt class="calibre3">
<span class="calibre4">12</span>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">-</span>
</tt>
 <span class="calibre2">
<tt class="calibre3">
<span class="calibre4">8</span>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">中的事件驱动并发echo服务器是有缺陷的，因为一个恶意的客户端能够通过发送部分的文 本杆，使服务器拒绝为其他客户端服务。编写一个改进的服务器版本，使之能够非阻塞地处理这些 部分文本行。</span>
</tt>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">RI0I/0</span>
</b>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">包中的函数（见</span>
</tt>
 <span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">10.4</span>
</b>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">节）都是线程安全的。它们也都是可重入函数吗？</span>
</tt>
</blockquote>
<span id="filepos0006959121"></span>
<p height="0pt" width="0pt" class="calibre39">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">[</span>
</tt>
</span>
 <a href="part0028_split_001.html#filepos0006812353">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">←19</span>
</tt>
</span>
</a>
 <span class="calibre11">
<tt class="calibre3">
<span class="calibre4">]</span>
</tt>
</span>
</p>
<blockquote height="0pt" width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">12.29下面的程序会死锁吗？为什么会或者为什么不会? 初始时：a<sup class="calibre7">
<small class="calibre8">
<tt class="calibre3">
<span class="calibre4">=</span>
</tt>
</small>
</sup>
 l, c<sup class="calibre7">
<small class="calibre8">
<tt class="calibre3">
<span class="calibre4">=</span>
</tt>
</small>
</sup>
 l.</span>
</tt>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">线程</span>
</tt>
 <span class="calibre2">
<tt class="calibre3">
<span class="calibre4">1</span>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">:</span>
</tt>
 <tt class="calibre3">
<span class="calibre4">      </span>
</tt>
 <tt class="calibre3">
<span class="calibre4">线程</span>
</tt>
 <span class="calibre2">
<tt class="calibre3">
<span class="calibre4">2</span>
</tt>
</span>
 <tt class="calibre3">
<span class="calibre4">:</span>
</tt>
</blockquote>
<span id="filepos0006960079"></span>
<p height="0pt" width="0pt" class="calibre39">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">[</span>
</tt>
</span>
 <a href="part0028_split_001.html#3NQJ-96d925d398a443b8b8af221b0d2c48c5">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">←20</span>
</tt>
</span>
</a>
 <span class="calibre11">
<tt class="calibre3">
<span class="calibre4">]</span>
</tt>
</span>
</p>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">      </span>
</b>
</i>
</tt>
</span>
 <span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">code/src/csapp. c</span>
</b>
</i>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">void nnix_error(char *msg) /*</span>
</b>
</tt>
</span>
 <span class="calibre12">
<b class="calibre13">
<span class="calibre4">Unix-style error */</span>
</b>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">fprintf(stderr, "%s: %s\n", msg, strerror(errno)); exit(0);</span>
</b>
</tt>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">void posix_error(int code, char *msg) /*</span>
</b>
</tt>
</span>
 <span class="calibre12">
<b class="calibre13">
<span class="calibre4">Posix-style error */</span>
</b>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">fprintf(stderr, "%s: %s\n", msg, strerror(code)); exit(0);</span>
</b>
</tt>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">void dns_error(char *msg) /* DNS-stvle</span>
</b>
</tt>
</span>
 <span class="calibre12">
<b class="calibre13">
<span class="calibre4">error</span>
</b>
</span>
 <span class="calibre12">
<i class="calibre15">
<b class="calibre13">
<span class="calibre4">*/</span>
</b>
</i>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<b class="calibre13">
<span class="calibre4">fprintf(stderr, "%s: DNS error %d\n", msg, h_errno);</span>
</b>
</tt>
</span>
</blockquote>
<blockquote height="0pt" width="0pt" class="calibre22">
<tt class="calibre3">
<span class="calibre4">图A-l错误报告函数</span>
</tt>
</blockquote>
<span id="filepos0006962008"></span>
<p height="0pt" width="0pt" class="calibre39">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">[</span>
</tt>
</span>
 <a href="part0028_split_001.html#filepos0006875819">
<span class="calibre11">
<tt class="calibre3">
<span class="calibre4">←21</span>
</tt>
</span>
</a>
 <span class="calibre11">
<tt class="calibre3">
<span class="calibre4">]</span>
</tt>
</span>
</p>
<blockquote height="0pt" width="0pt" class="calibre22">
<span class="calibre12">
<tt class="calibre3">
<span class="calibre4">      </span>
</tt>
</span>
 <span class="calibre12">
<tt class="calibre3">
<span class="calibre4">struct hostent *Gethostbyname(const char *name)</span>
</tt>
</span>
</blockquote>
<p height="1em" width="0pt" class="calibre27">
<span class="calibre11">
<b class="calibre13">Table of Contents</b>
</span>
</p>
<p height="1em" width="-14pt" class="calibre39">
<a href="part0000_split_001.html#filepos0000190684">第1章计算机系统漫游      1</a>
</p>
<p height="0pt" width="-14pt" class="calibre39">
<a href="part0000_split_001.html#filepos0000195526">1.1信息就是位+上下文      1</a>
</p>
<p height="0pt" width="-14pt" class="calibre39">
<a href="part0000_split_001.html#filepos0000235889">系统的硬件组成……             5</a>
</p>
<p height="0pt" width="-14pt" class="calibre39">
<a href="part0001_split_000.html#filepos0000245520">1.5高速缓存至关重要      7</a>
</p>
<p height="0pt" width="-14pt" class="calibre39">
<a href="part0001_split_000.html#filepos0000252147">.1,6存储设备形成层次结构      9</a>
</p>
<p height="0pt" width="-14pt" class="calibre39">
<a href="part0001_split_000.html#filepos0000278935">1.8系统之间利用网络通信      13</a>
</p>
<p height="0pt" width="-14pt" class="calibre39">
<a href="part0001_split_000.html#filepos0000307377">第2章信息的表示和处理      20</a>
</p>
<p height="0pt" width="-14pt" class="calibre39">
<a href="part0001_split_000.html#filepos0000319179">2.1信息存储            22</a>
</p>
<p height="0pt" width="-14pt" class="calibre39">
<a href="part0001_split_001.html#filepos0000359130">数据大小            25</a>
</p>
<p height="0pt" width="-14pt" class="calibre39">
<a href="part0001_split_001.html#filepos0000422001">2.1.7布尔代数简介      32</a>
</p>
<p height="0pt" width="-14pt" class="calibre39">
<a href="part0001_split_001.html#filepos0000447020">C语言中的位级运算      34</a>
</p>
<p height="0pt" width="-14pt" class="calibre39">
<a href="part0001_split_001.html#filepos0000466390">C语言中的逻辑运算      36</a>
</p>
<p height="0pt" width="-14pt" class="calibre39">
<a href="part0002_split_001.html#filepos0000684780">整数运算            54</a>
</p>
<p height="0pt" width="-14pt" class="calibre39">
<a href="part0003_split_000.html#filepos0000781362">2.3.7除以2的幂                         64.</a>
</p>
<p height="0pt" width="-14pt" class="calibre39">
<a href="part0003_split_001.html#filepos0000813233">浮点数……                  61</a>
</p>
<p height="0pt" width="-14pt" class="calibre39">
<a href="part0003_split_001.html#filepos0000816239">二进制小数                   68</a>
</p>
<p height="0pt" width="-14pt" class="calibre39">
<a href="part0004_split_000.html#filepos0000923117">C语言中的浮点数      77</a>
</p>
<p height="0pt" width="-14pt" class="calibre39">
<a href="part0001_split_000.html#filepos0000304704">参考文献说明      80</a>
</p>
<p height="0pt" width="-14pt" class="calibre39">
<a href="part0009_split_001.html#filepos0002323438">家庭作业      洲</a>
</p>
<p height="0pt" width="-14pt" class="calibre39">
<a href="part0004_split_000.html#filepos0001011793">练习题答案      90</a>
</p>
<p height="0pt" width="-14pt" class="calibre39">
<a href="part0005_split_000.html#filepos0001193956">程序编码                              】05</a>
</p>
<p height="0pt" width="-14pt" class="calibre39">
<a href="part0005_split_000.html#filepos0001251507">访问信息      …112</a>
</p>
<p height="0pt" width="-14pt" class="calibre39">
<a href="part0005_split_001.html#filepos0001330693">加载有效地址             JI8</a>
</p>
<p height="0pt" width="-14pt" class="calibre39">
<a href="part0005_split_001.html#filepos0001346367">移位操作……      !20</a>
</p>
</body>
</html>
